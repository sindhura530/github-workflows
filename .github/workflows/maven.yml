name: Java CI with Maven

on: 
  workflow_call:
    inputs:
      javaVersion:
           type: string
           required: true
      nodeVersion:
           type: string
           required: true
    

jobs:
  java11:
    #if: ${{ inputs.javaVersion }}
    #if: ${{ inputs.TRIGGER_EVENT == 'pull_request' }}
    if: ${{ inputs.javaVersion == '11' }} && ${{ inputs.nodeVersion == '14' }}
    runs-on: ubuntu-latest
    container: 
      image: openjdk:11

    steps:
    - name: Check-out project
      uses: actions/checkout@v1
    - name: install dependencies
      run: |
          mkdir artifact 
          cd artifact
          echo " mvn --batch-mode --update-snapshots package" > target.jar
          cd ..
    - name: upload artifact
      uses: actions/upload-artifact@v3
      with:
          name: artifact1
          path: ./
          
          
  java12:
    #if: "contains(github.event.${{ inputs.javaVersion }}, '12')"
    if: ${{ inputs.javaVersion == '12' }}
    runs-on: ubuntu-latest
    container: 
      image: openjdk:12

    steps:
    - name: Check-out project
      uses: actions/checkout@v1
    - name: install dependencies
      run: |
          mkdir artifact 
          cd artifact
          echo " mvn --batch-mode --update-snapshots package" > target.jar
          cd ..
    - name: upload artifact
      uses: actions/upload-artifact@v3
      with:
          name: artifact2
          path: ./
